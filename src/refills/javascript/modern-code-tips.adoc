---
rid: 1497767
bid: javascript
rcd: modern-code-tips
srcpath: javascript/modern-code-tips.md
title: モダン CODE TIPS
category: JavaScript
date: 2017.11.23
layout: refill.jade
---

== Cheatsheet

- link:https://devhints.io/es6[ES2015+ cheatsheet]


== async / await

=== Sleep / Wait

.async関数の中
```js
await new Promise(r => setTimeout(r, 5000));
```

.即時関数
```js
(async () => {
  console.log('start');
  await new Promise(r => setTimeout(r, 5000));
  console.log('end');
})();
```

=== 非同期処理の For Loop 繰り返し

- link:https://stackoverflow.com/questions/37576685/using-async-await-with-a-foreach-loop[javascript - Using async/await with a forEach loop - Stack Overflow]

.直列実行
```js
async function printFiles () {
  const files = await getFilePaths();

  for (let file of files) {
    const contents = await fs.readFile(file, 'utf8');
    console.log(contents);
  }
}
```

.並列実行
```js
async function printFiles () {
  const files = await getFilePaths();

  await Promise.all(files.map(async (file) => {
    const contents = await fs.readFile(file, 'utf8')
    console.log(contents)
  }));
}
```


== Objectの複製・マージ

- link:https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/assign[Object.assign() - JavaScript | MDN]

.オブジェクトを複製する
```js
const obj = { a: 1 };
const copy = Object.assign({}, obj);
console.log(copy); // { a: 1 }
```

.オブジェクトをマージする
```js
const o1 = { a: 1 };
const o2 = { b: 2 };
const o3 = { c: 3 };

const obj = Object.assign(o1, o2, o3);
console.log(obj); // { a: 1, b: 2, c: 3 }
console.log(o1);  // { a: 1, b: 2, c: 3 }, targetオブジェクト自身が変化する
```


== Array

=== 重複の除去 (unique / distinct)

- link:https://qiita.com/waka-ka/items/694866bd1a6a90289c33[[Javascript\] 配列の重複を取り出す方法 - Qiita]

```js
const animals = ["cat", "cat", "dog", "mouse", "dog"];
const distinctAnimals = [...new Set(animals)];
//=> ["cat", "dog", "mouse"]
```

=== 指定した範囲の整数配列

- link:http://blog.mudatobunka.org/entry/2015/10/31/222750[指定した範囲の整数配列の作り方 in JavaScript ES6 - 無駄と文化]

```js
Array.from(Array(100).keys())
// => [0, 1, 2, ..., 99]
```


== import

- link:https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/import[import - JavaScript | MDN]

=== 別名をつける

```js
import { member as alias } from "module-name";
```


== class

=== 静的メソッドの呼び出し
- link:https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Classes/static[static - JavaScript | MDN]
  * 他の静的メソッドから
  * クラスのコンストラクタや他のメソッドから
